{"id":587,"date":"2023-08-07T13:38:56","date_gmt":"2023-08-07T13:38:56","guid":{"rendered":"http:\/\/192.168.0.142\/?p=587"},"modified":"2023-08-08T12:10:48","modified_gmt":"2023-08-08T12:10:48","slug":"rest-api-in-go-using-gorilla-mux","status":"publish","type":"post","link":"http:\/\/192.168.0.142\/rest-api-in-go-using-gorilla-mux\/","title":{"rendered":"REST Api in Go using Gorilla\/Mux"},"content":{"rendered":"\n<p><strong>This post explains how to develop REST APIs in Go language using Gorilla Mux<\/strong><\/p>\n\n\n\n<p id=\"1bed\"><strong>Gorilla Mux is a package from the Gorilla Web Toolkit. It provides simple ways to create HTTP routers. Using the package, we can redirect program flow to respective HTTP handler functions.<\/strong><\/p>\n\n\n\n<p><strong>Create a directory for the project<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"bash\" class=\"language-bash\">mkdir api-demo<\/code><\/pre>\n\n\n\n<p><strong>Initialize a go project named &#8216;api-demo&#8217;<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"bash\" class=\"language-bash\">go mod init rinoymjoseph.github.com\/api-demo<\/code><\/pre>\n\n\n\n<p><strong>Install Gorilla Mux<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"bash\" class=\"language-bash\">go get -u github.com\/gorilla\/mux<\/code><\/pre>\n\n\n\n<p><strong>Add a file named warrior.go which contains a type<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"go\" class=\"language-go\">package main\r\n\r\ntype Warrior struct {\r\n\tId   int    `json:\"id\"`\r\n\tName string `json:\"name\"`\r\n}\r\n<\/code><\/pre>\n\n\n\n<p><strong>Add a file named handlers.go which contains handler functions<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"go\" class=\"language-go\">package main\r\n\r\nimport (\r\n\t\"encoding\/json\"\r\n\t\"fmt\"\r\n\t\"log\"\r\n\t\"net\/http\"\r\n)\r\n\r\nfunc health(w http.ResponseWriter, r *http.Request) {\r\n\tlog.Println(\"Entering health check\")\r\n\tw.WriteHeader(http.StatusOK)\r\n\tfmt.Fprintf(w, \"API is up and running\")\r\n}\r\n\r\nfunc getWarriors(w http.ResponseWriter, r *http.Request) {\r\n\tlog.Println(\"Entering getWarriors\")\r\n\tpersons := buildWarriors()\r\n\tw.Header().Set(\"Content-Type\", \"application\/json\")\r\n\tw.WriteHeader(http.StatusOK)\r\n\tjsonResponse, err := json.Marshal(persons)\r\n\tif err != nil {\r\n\t\treturn\r\n\t}\r\n\tw.Write(jsonResponse)\r\n}\r\n\r\nfunc buildWarriors() []Warrior {\r\n\tvar warriors []Warrior\r\n\r\n\tvar warrior Warrior\r\n\twarrior.Id = 1\r\n\twarrior.Name = \"Link\"\r\n\twarriors = append(warriors, warrior)\r\n\r\n\twarrior.Id = 2\r\n\twarrior.Name = \"Zelda\"\r\n\twarriors = append(warriors, warrior)\r\n\r\n\twarrior.Id = 3\r\n\twarrior.Name = \"Revali\"\r\n\twarriors = append(warriors, warrior)\r\n\treturn warriors\r\n}\r\n<\/code><\/pre>\n\n\n\n<p><strong>Create a main.go file and add below contents<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"go\" class=\"language-go\">package main\r\n\r\nimport (\r\n\t\"log\"\r\n\t\"net\/http\"\r\n\r\n\t\"github.com\/gorilla\/mux\"\r\n)\r\n\r\nfunc main() {\r\n\tlog.Println(\"Starting API server\")\r\n\t\/\/create a new router\r\n\trouter := mux.NewRouter()\r\n\tlog.Println(\"Creating routes\")\r\n\t\/\/specify endpoints\r\n\trouter.HandleFunc(\"\/health\", health).Methods(\"GET\")\r\n\trouter.HandleFunc(\"\/warriors\", getWarriors).Methods(\"GET\")\r\n\thttp.Handle(\"\/\", router)\r\n\t\/\/start and listen to requests\r\n\thttp.ListenAndServe(\":8080\", router)\r\n}\r\n<\/code><\/pre>\n\n\n\n<p><strong>Get the packages<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"bash\" class=\"language-bash\">go get .\ngo mod tidy<\/code><\/pre>\n","protected":false},"excerpt":{"rendered":"<p>This post explains how to develop REST APIs in Go language using Gorilla Mux Gorilla Mux is a package from the Gorilla Web Toolkit. It provides simple ways to create HTTP routers. Using the package, we can redirect program flow to respective HTTP handler functions. Create a directory for the project Initialize a go project &#8230; <a title=\"REST Api in Go using Gorilla\/Mux\" class=\"read-more\" href=\"http:\/\/192.168.0.142\/rest-api-in-go-using-gorilla-mux\/\" aria-label=\"More on REST Api in Go using Gorilla\/Mux\">Read more<\/a><\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"closed","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[56],"tags":[57,61],"_links":{"self":[{"href":"http:\/\/192.168.0.142\/wp-json\/wp\/v2\/posts\/587"}],"collection":[{"href":"http:\/\/192.168.0.142\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/192.168.0.142\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/192.168.0.142\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/192.168.0.142\/wp-json\/wp\/v2\/comments?post=587"}],"version-history":[{"count":8,"href":"http:\/\/192.168.0.142\/wp-json\/wp\/v2\/posts\/587\/revisions"}],"predecessor-version":[{"id":663,"href":"http:\/\/192.168.0.142\/wp-json\/wp\/v2\/posts\/587\/revisions\/663"}],"wp:attachment":[{"href":"http:\/\/192.168.0.142\/wp-json\/wp\/v2\/media?parent=587"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/192.168.0.142\/wp-json\/wp\/v2\/categories?post=587"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/192.168.0.142\/wp-json\/wp\/v2\/tags?post=587"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}