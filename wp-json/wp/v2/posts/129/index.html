{"id":129,"date":"2023-07-31T15:52:05","date_gmt":"2023-07-31T15:52:05","guid":{"rendered":"http:\/\/192.168.0.142\/?p=129"},"modified":"2023-08-03T05:06:28","modified_gmt":"2023-08-03T05:06:28","slug":"installation-of-elastic-search-and-kibana-on-ubuntu-22-04","status":"publish","type":"post","link":"http:\/\/192.168.0.142\/installation-of-elastic-search-and-kibana-on-ubuntu-22-04\/","title":{"rendered":"Elasticsearch and Kibana installation on Ubuntu 22.04"},"content":{"rendered":"\n<p class=\"has-text-align-left\">Elasticsearch is a search engine based on the Lucene library. It provides a distributed, multitenant-capable full-text search engine with an HTTP web interface and schema-free JSON documents.<br>As the heart of the Elastic Stack, it centrally stores your data for lightning fast search, fine\u2011tuned relevancy, and powerful analytics that scale with ease.<\/p>\n\n\n\n<p>This post will guide you through installation and configuration of Elasticsearch and Kibana.<\/p>\n\n\n\n<p><strong>Update package index files<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"bash\" class=\"language-bash\">sudo apt update<\/code><\/pre>\n\n\n\n<p><strong>Install dependencies<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"bash\" class=\"language-bash\">sudo apt-get install apt-transport-https<\/code><\/pre>\n\n\n\n<p><strong>Import the Elasticsearch PGP Key<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"bash\" class=\"language-bash\">wget -qO - https:\/\/artifacts.elastic.co\/GPG-KEY-elasticsearch | sudo gpg --dearmor -o \/usr\/share\/keyrings\/elasticsearch-keyring.gpg<\/code><\/pre>\n\n\n\n<p><strong>Add the Elastic source list to the sources.list.d directory, where apt will search for new sources:<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"bash\" class=\"language-bash\">echo \"deb [signed-by=\/usr\/share\/keyrings\/elasticsearch-keyring.gpg] https:\/\/artifacts.elastic.co\/packages\/8.x\/apt stable main\" | sudo tee \/etc\/apt\/sources.list.d\/elastic-8.x.list<\/code><\/pre>\n\n\n\n<h3 class=\"wp-block-heading\">Elasticsearch Installation<\/h3>\n\n\n\n<p><strong>Install elasticsearch<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"bash\" class=\"language-bash\">sudo apt update &amp;&amp; sudo apt install elasticsearch<\/code><\/pre>\n\n\n\n<p><strong>Enable Elasticsearch service<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"bash\" class=\"language-bash\">sudo systemctl daemon-reload\nsudo systemctl enable elasticsearch.service<\/code><\/pre>\n\n\n\n<p><strong>Elasticsearch can be started as follows<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"bash\" class=\"language-bash\">sudo systemctl start elasticsearch.service<\/code><\/pre>\n\n\n\n<p><strong>To stop Elasticsearch run below command<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"bash\" class=\"language-bash\">sudo systemctl stop elasticsearch.service<\/code><\/pre>\n\n\n\n<p><strong>To list journal entries for the Elasticsearch service run below command<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"bash\" class=\"language-bash\">journalctl --unit elasticsearch<\/code><\/pre>\n\n\n\n<p><strong>You should see similar output as below in the console<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"bash\" class=\"language-bash\">$ journalctl --unit elasticsearch\nAug 01 11:34:36 abb systemd[1]: Starting Elasticsearch...\nAug 01 11:34:49 abb systemd[1]: Started Elasticsearch.<\/code><\/pre>\n\n\n\n<p><strong>To reset password of Elasticsearch run below command<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"bash\" class=\"language-bash\">sudo \/usr\/share\/elasticsearch\/bin\/elasticsearch-reset-password -u elastic<\/code><\/pre>\n\n\n\n<p><strong>You should see output similar to below in the console<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"bash\" class=\"language-bash\">$ sudo \/usr\/share\/elasticsearch\/bin\/elasticsearch-reset-password -u elastic\nThis tool will reset the password of the [elastic] user to an autogenerated value.\nThe password will be printed in the console.\nPlease confirm that you would like to continue [y\/N]y\n\n\nPassword for the [elastic] user successfully reset.\nNew value: D5SQMkZ*I_m5qCVAFHQE<\/code><\/pre>\n\n\n\n<p><strong>To Check Elasticsearch is up and running run below command<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"bash\" class=\"language-bash\">curl -k -u elastic https:\/\/localhost:9200<\/code><\/pre>\n\n\n\n<p><strong>You should see output similar to below after entering the password<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"bash\" class=\"language-bash\">$ curl -k -u elastic https:\/\/localhost:9200\nEnter host password for user 'elastic':\n{\n  \"name\" : \"abb\",\n  \"cluster_name\" : \"elasticsearch\",\n  \"cluster_uuid\" : \"bD_SCK32SYinR79L6SbagQ\",\n  \"version\" : {\n    \"number\" : \"8.8.2\",\n    \"build_flavor\" : \"default\",\n    \"build_type\" : \"deb\",\n    \"build_hash\" : \"98e1271edf932a480e4262a471281f1ee295ce6b\",\n    \"build_date\" : \"2023-06-26T05:16:16.196344851Z\",\n    \"build_snapshot\" : false,\n    \"lucene_version\" : \"9.6.0\",\n    \"minimum_wire_compatibility_version\" : \"7.17.0\",\n    \"minimum_index_compatibility_version\" : \"7.0.0\"\n  },\n  \"tagline\" : \"You Know, for Search\"\n}<\/code><\/pre>\n\n\n\n<h3 class=\"wp-block-heading\">Kibana Installation<\/h3>\n\n\n\n<p><strong>Install kibana by running below command<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"bash\" class=\"language-bash\">sudo apt install kibana<\/code><\/pre>\n\n\n\n<p>Make below changes in \/etc\/elasticsearch\/elasticsearch.yml to allow connection from kibana. Edit the file and uncomment\/edit lines.<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"bash\" class=\"language-bash\">http.port: 9200\nnetwork.host: 0.0.0.0<\/code><\/pre>\n\n\n\n<p><strong>Restart Elasticsearch service<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"bash\" class=\"language-bash\">sudo systemctl restart elasticsearch<\/code><\/pre>\n\n\n\n<p>Make below changes in &nbsp;\/etc\/kibana\/kibana.yml to configure kibana.<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"bash\" class=\"language-bash\">server.port: 5601\nserver.host: \"X.X.X.X\" (Kibana server's IP address)<\/code><\/pre>\n\n\n\n<p><strong>For e.g., <\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"bash\" class=\"language-bash\">server.port: 5601\nserver.host: \"192.168.0.183\"<\/code><\/pre>\n\n\n\n<p><strong>Restart kibana<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"bash\" class=\"language-bash\">sudo systemctl restart kibana.service <\/code><\/pre>\n\n\n\n<p><strong>Access host ip:5601 (for e.g http:\/\/192.168.0.183:5601\/) in a browser to configure Kibana with Elasticsearch. <\/strong><\/p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img decoding=\"async\" loading=\"lazy\" width=\"1024\" height=\"525\" src=\"http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elastic-configuration-1024x525.png\" alt=\"Kibana Elasticsearch configuration page\" class=\"wp-image-285\" srcset=\"http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elastic-configuration-1024x525.png 1024w, http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elastic-configuration-300x154.png 300w, http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elastic-configuration-768x394.png 768w, http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elastic-configuration.png 1352w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" \/><\/figure>\n\n\n\n<p><strong>Run below command to generate enrollment token<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"bash\" class=\"language-bash\">sudo \/usr\/share\/elasticsearch\/bin\/elasticsearch-create-enrollment-token -s kibana<\/code><\/pre>\n\n\n\n<p><strong>Reference output<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"bash\" class=\"language-bash\">ability@abb:~$ sudo \/usr\/share\/elasticsearch\/bin\/elasticsearch-create-enrollment-token -s kibana\neyJ2ZXIiOiI4LjkuMCIsImFkciI6WyIxOTIuMTY4LjAuMTgzOjkyMDAiXSwiZmdyIjoiZTc1ZDEwYTllNDA2NDg5YWQxNzdhM2VkMzE1NGM3ZmRkOTMwYTIxYjM5OTY3NDkxYzI1MzY4Yjc3MDBiM2E5OCIsImtleSI6IjJmcnNzSWtCeHBiSklOaEtKQkJEOld1Qnlyb1FtVDE2VU9sZjlPRUJkN2cifQ==<\/code><\/pre>\n\n\n\n<p><strong>Enter enrollment token in textbox and click on &#8216;Configure Elastic&#8217; button<\/strong><\/p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img decoding=\"async\" loading=\"lazy\" width=\"1024\" height=\"531\" src=\"http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elastic-configuration-2-1024x531.png\" alt=\"Kibana Elasticsearch configuration - Enrollment Token\" class=\"wp-image-287\" srcset=\"http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elastic-configuration-2-1024x531.png 1024w, http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elastic-configuration-2-300x156.png 300w, http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elastic-configuration-2-768x399.png 768w, http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elastic-configuration-2-1536x797.png 1536w, http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elastic-configuration-2.png 1561w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" \/><\/figure>\n\n\n\n<p><strong>Next step is to verify using another token<\/strong><\/p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img decoding=\"async\" loading=\"lazy\" width=\"1024\" height=\"569\" src=\"http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elastic-search-verification-token-page-1024x569.png\" alt=\"Kibana Elasticsearch Verification Token Page\" class=\"wp-image-289\" srcset=\"http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elastic-search-verification-token-page-1024x569.png 1024w, http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elastic-search-verification-token-page-300x167.png 300w, http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elastic-search-verification-token-page-768x426.png 768w, http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elastic-search-verification-token-page.png 1475w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" \/><\/figure>\n\n\n\n<p><strong>To generate verification token<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"bash\" class=\"language-bash\">sudo \/usr\/share\/kibana\/bin\/kibana-verification-code <\/code><\/pre>\n\n\n\n<p><strong>Reference output<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"bash\" class=\"language-bash\">$ sudo \/usr\/share\/kibana\/bin\/kibana-verification-code \nYour verification code is:  571 272 <\/code><\/pre>\n\n\n\n<p><strong>Enter verification code and click on &#8216;Verify&#8217;<\/strong><\/p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img decoding=\"async\" loading=\"lazy\" width=\"1024\" height=\"581\" src=\"http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elastic-search-verification-token-value-1024x581.png\" alt=\"Kibana Elasticsearch Verification Token Value\" class=\"wp-image-291\" srcset=\"http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elastic-search-verification-token-value-1024x581.png 1024w, http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elastic-search-verification-token-value-300x170.png 300w, http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elastic-search-verification-token-value-768x436.png 768w, http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elastic-search-verification-token-value.png 1418w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" \/><\/figure>\n\n\n\n<p><strong>You should see below page <\/strong><\/p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img decoding=\"async\" loading=\"lazy\" width=\"1024\" height=\"600\" src=\"http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elasticsearch-configruation-final-1024x600.png\" alt=\"Kibana Elasticsearch Configuration Apply\" class=\"wp-image-293\" srcset=\"http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elasticsearch-configruation-final-1024x600.png 1024w, http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elasticsearch-configruation-final-300x176.png 300w, http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elasticsearch-configruation-final-768x450.png 768w, http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elasticsearch-configruation-final.png 1537w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" \/><\/figure>\n\n\n\n<p><strong>Refresh the page if installation stuck at &#8216;Completing setup&#8217; step. After setup is completed successfully login page is displayed.<\/strong><\/p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img decoding=\"async\" loading=\"lazy\" width=\"1024\" height=\"599\" src=\"http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elasticsearch-login-screen-1024x599.png\" alt=\"Kibana Elasticsearch Login Page\" class=\"wp-image-295\" srcset=\"http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elasticsearch-login-screen-1024x599.png 1024w, http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elasticsearch-login-screen-300x176.png 300w, http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elasticsearch-login-screen-768x449.png 768w, http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-elasticsearch-login-screen.png 1480w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" \/><\/figure>\n\n\n\n<p><strong>Enter the credentials. Username is elastic.<\/strong><\/p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img decoding=\"async\" loading=\"lazy\" width=\"1024\" height=\"516\" src=\"http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-home-page-1024x516.png\" alt=\"Kibana Home Page\" class=\"wp-image-297\" srcset=\"http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-home-page-1024x516.png 1024w, http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-home-page-300x151.png 300w, http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-home-page-768x387.png 768w, http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-home-page-1536x774.png 1536w, http:\/\/192.168.0.142\/wp-content\/uploads\/2023\/07\/kibana-home-page.png 1897w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" \/><\/figure>\n","protected":false},"excerpt":{"rendered":"<p>Elasticsearch is a search engine based on the Lucene library. It provides a distributed, multitenant-capable full-text search engine with an HTTP web interface and schema-free JSON documents.As the heart of the Elastic Stack, it centrally stores your data for lightning fast search, fine\u2011tuned relevancy, and powerful analytics that scale with ease. This post will guide &#8230; <a title=\"Elasticsearch and Kibana installation on Ubuntu 22.04\" class=\"read-more\" href=\"http:\/\/192.168.0.142\/installation-of-elastic-search-and-kibana-on-ubuntu-22-04\/\" aria-label=\"More on Elasticsearch and Kibana installation on Ubuntu 22.04\">Read more<\/a><\/p>\n","protected":false},"author":1,"featured_media":284,"comment_status":"closed","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[21],"tags":[22,23,12],"_links":{"self":[{"href":"http:\/\/192.168.0.142\/wp-json\/wp\/v2\/posts\/129"}],"collection":[{"href":"http:\/\/192.168.0.142\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/192.168.0.142\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/192.168.0.142\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/192.168.0.142\/wp-json\/wp\/v2\/comments?post=129"}],"version-history":[{"count":38,"href":"http:\/\/192.168.0.142\/wp-json\/wp\/v2\/posts\/129\/revisions"}],"predecessor-version":[{"id":346,"href":"http:\/\/192.168.0.142\/wp-json\/wp\/v2\/posts\/129\/revisions\/346"}],"wp:featuredmedia":[{"embeddable":true,"href":"http:\/\/192.168.0.142\/wp-json\/wp\/v2\/media\/284"}],"wp:attachment":[{"href":"http:\/\/192.168.0.142\/wp-json\/wp\/v2\/media?parent=129"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/192.168.0.142\/wp-json\/wp\/v2\/categories?post=129"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/192.168.0.142\/wp-json\/wp\/v2\/tags?post=129"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}